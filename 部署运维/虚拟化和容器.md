> Docker 是以容器虚拟化技术为基础的软件

# 虚拟化技术

将==计算机物理资源==进行抽象，转换为==虚拟的计算机资源==提供给程序使用的技术

### 起源

在计算机发展的初期，各类计算平台提供的接口、协议、调用方式十分杂乱，没有形成像今天这样相对统一的标准，这样就很不利于程序的移植和运行，想适配不同的平台，就需要开发者编写各种兼容代码，为了让应用程序能够适配不同平台的物理机器，虚拟化技术诞生了



程序对计算机资源的调用主要依赖于操作系统给出的接口，反过来我们的程序也是通过操作系统提供的接口，向物理硬件发送指令。因此，要实现应用程序跨平台，其实就是使应用程序不需要关注平台或者接口差异，只针对一套统一的接口开发即可，虚拟化技术去适配不同的平台或硬件，加以抽象成统一的接口，暴露出来供应用程序调用，这样就实现了程序跨平台运行这一目的

其实就算到今天，虚拟化技术仍旧对于实现跨平台运行应用程序意义非凡（虚拟 DOM）

### 虚拟化应用于资源管理

在虚拟化技术的发展过程中，人们逐渐发现也可以将其应用于计算机资源管理

比如不管真实物理机器内存有多大，是 8GB 还是 12GB，只要告诉应用程序计算机只有 4GB 内存，那程序就会按照 4GB 这个“虚假”值来处理它的逻辑

通过虚拟化技术来管理计算机资源，一方面可以更灵活的控制计算机，另一方面可以==提高计算机资源利用率==



之前一直有个疑虑，实现虚拟化的程序本身也要占用计算机资源，相当于是机器“额外“多运行了一个程序，为什么会说更高效呢

其实我们这里说的是**提高计算机资源利用率**，而不是**降低程序资源占用率**，二者不是一个概念

使用虚拟化技术，是说我们可以将原来用不到的资源拿出来，分给另外一些程序，让计算机资源不被浪费

假设有一台机器运行着 nginx，对系统资源消耗并不高，这就会使硬件资源闲置，此时我们就可以通过虚拟化技术，把其他一些程序放到这台机器上来运行，这样就可以充分利用闲置的资源而不必额外部署机器



那这里还有一个问题，可以直接在机器上安装多个程序同时运行的，为啥要分别安装到不同的虚拟环境中去呢

那是因为机器上同时运行多个程序可能会发生冲突，这里的冲突提现在很多方面；比如不同的程序都需要使用某个端口，不同的程序依赖于同一个工具库的不同版本，程序本身对于启动的进程数量有限制等等...虚拟化技术通过资源隔离的方式，将需要的应用程序隔离在不同的虚拟环境中，这样程序间就不会互相影响，运行的更加稳定

### 虚拟机

安装操作系统经常使用的 VMware、Java 虚拟机 jvm 等

可以发现，一些特定语言运行环境中的核心部分，就有虚拟化技术实实在在的体现，它们通过隔离程序和操作系统，将程序代码转换为当前操作系统平台所能识别的指令，达到了一次编写，随处运行的效果，因此这些语言都具有非常强的跨平台性

当然这同时带来了另一个问题，就是指令必须先经过虚拟机处理才能真正执行，性能一定会有损耗，因此出现了 JIT 等技术手段





